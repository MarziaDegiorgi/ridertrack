<app-page-header title="progress: {{event.name}}"></app-page-header>

<!-- PARTICIPANT SEARCH FORM-->
<div class="row search-form"  style="visibility: visible;">
  <form *ngIf="participantsList" class="form-inline">
    <div class="col-xs-12 col-md-8">
      Select a participant to track:
      <div class="form-group">
        <select id="race" #searchType class="selectpicker" (change)="onChange($event)"
                data-live-search="true" data-live-search-style="begins"
                title="Select a participant">
          <option value="-1" selected>Select a Participant</option>
          <option *ngFor="let participant of participantsList" [value]="participant" style="text-transform: capitalize">
            {{participant.name}} {{participant.surname}}</option>
        </select>
      </div>
    </div>
  </form>
</div>
<!-- MAP PROGRESS -->
<agm-map id="map" #map [longitude]="initLong" [latitude]="initLat" [zoom]="zoom">
  <div *ngFor="let participantM of participantsMarkers">
    <div *ngIf="participantM.select">
      <agm-marker [latitude]="participantM.lat"
                  [longitude]="participantM.lng"
                  [iconUrl]="participantM.icon">
        <agm-info-window [closeWhenOthersOpen]="true" >{{participantM.user.name}} {{participantM.user.surname}}
          <br> timestamp: {{participantM.timestamp}}
        </agm-info-window>
      </agm-marker>
    </div>
  </div>
  <map-direction *ngIf="directions != null" [origin]="directions.origin" [destination]="directions.destination"
                 [waypoints]="directions.waypoints"></map-direction>
</agm-map>
